% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_directory.R
\name{fetch_directory}
\alias{fetch_directory}
\title{Fetch California school directory data}
\usage{
fetch_directory(end_year = NULL, tidy = TRUE, use_cache = TRUE)
}
\arguments{
\item{end_year}{Currently unused. The directory data represents current
schools and is not year-specific. Included for API consistency with
other fetch functions.}

\item{tidy}{If TRUE (default), returns data in a standardized format with
consistent column names. If FALSE, returns raw column names from CDE.}

\item{use_cache}{If TRUE (default), uses locally cached data when available.
Set to FALSE to force re-download from CDE.}
}
\value{
A tibble with school directory data. Columns include:
\itemize{
\item \code{cds_code}: 14-digit CDS identifier
\item \code{county_code}: 2-digit county code
\item \code{district_code}: 5-digit district code
\item \code{school_code}: 7-digit school code
\item \code{school_name}: School name (or district name for district-level rows)
\item \code{district_name}: District name
\item \code{county_name}: County name
\item \code{school_type}: Type of school (e.g., "Elementary", "High School")
\item \code{street}: Street address
\item \code{city}: City
\item \code{state}: State (always "CA")
\item \code{zip}: ZIP code
\item \code{phone}: Phone number
\item \code{admin_name}: Administrator name (principal for schools,
superintendent for districts)
\item \code{agg_level}: Aggregation level ("S" = School, "D" = District)
\item \code{status}: School status (e.g., "Active", "Closed")
\item \code{charter_status}: Charter indicator (Y/N)
\item \code{latitude}: Geographic latitude
\item \code{longitude}: Geographic longitude
}
}
\description{
Downloads and processes school directory data from the California Department
of Education SchoolDirectory. This includes all public schools and districts
with contact information and administrator names.
}
\details{
The directory data is downloaded as an Excel file from the CDE SchoolDirectory
page. This data represents the current state of California schools and districts
and is updated periodically by CDE.
}
\examples{
\dontrun{
# Get school directory data
dir_data <- fetch_directory()

# Get raw format (original CDE column names)
dir_raw <- fetch_directory(tidy = FALSE)

# Force fresh download (ignore cache)
dir_fresh <- fetch_directory(use_cache = FALSE)

# Filter to active schools only
library(dplyr)
active_schools <- dir_data |>
  filter(agg_level == "S", status == "Active")

# Find all schools in a district
lausd_schools <- dir_data |>
  filter(district_code == "64733", agg_level == "S")
}
}
