% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_assessment.R
\name{fetch_assess}
\alias{fetch_assess}
\title{Fetch California CAASPP assessment data}
\usage{
fetch_assess(
  end_year,
  tidy = TRUE,
  subject = c("Both", "ELA", "Math"),
  student_group = c("ALL", "GROUPS"),
  local_data = NULL,
  use_cache = TRUE
)
}
\arguments{
\item{end_year}{School year end (e.g., 2023 for 2022-23 school year).
Supports 2015-2024. Note: 2020 data may be limited due to COVID-19.}

\item{tidy}{If TRUE (default), returns data in long (tidy) format with
metric_type and metric_value columns. If FALSE, returns wide format
with separate columns for each metric.}

\item{subject}{Assessment subject to fetch: "Both" (default), "ELA", or "Math"}

\item{student_group}{"ALL" (default) for all students aggregate, or "GROUPS"
for all student group breakdowns (demographics, EL status, etc.)}

\item{local_data}{Optional local data from \code{\link{import_local_assess}()}
to use instead of downloading. Use this when you have manually downloaded
CAASPP files from the portal.}

\item{use_cache}{If TRUE (default), uses locally cached data when available}
}
\value{
A tibble with assessment data. In tidy format, includes columns:
\itemize{
\item \code{end_year}: School year end (integer)
\item \code{cds_code}: 14-digit CDS identifier
\item \code{county_code}, \code{district_code}, \code{school_code}: CDS components
\item \code{agg_level}: Aggregation level (S=School, D=District, C=County, T=State)
\item \code{grade}: Grade level (03, 04, 05, 06, 07, 08, 11, or 13 for all grades)
\item \code{subject}: Assessment subject (ELA or Math)
\item \code{metric_type}: Type of metric (only in tidy format)
\item \code{metric_value}: Value of the metric (only in tidy format)
}
}
\description{
Downloads and processes CAASPP Smarter Balanced assessment data from the
California Department of Education. Includes test results for grades 3-8
and 11 in ELA and Mathematics.
}
\details{
\subsection{Available Years:}{

\itemize{
\item 2015-2019: Pre-COVID baseline data
\item 2020: Limited data (COVID-19 disruptions)
\item 2021: Reduced participation
\item 2022-2024: Full post-pandemic data
}
}

\subsection{Data Source:}{

California CAASPP Smarter Balanced Assessments
Portal: https://caaspp-elpac.ets.org/caaspp/ResearchFileListSB
}

\subsection{Manual Download Required:}{

The CAASPP portal does not provide publicly documented direct download URLs.
Users must:
\enumerate{
\item Visit the CAASPP Research Files portal
\item Download statewide research files (caret-delimited format)
\item Use \code{\link{import_local_assess}()} to load the files
\item This function will then process the data
}

See \code{vignette("assessment")} for detailed examples.
}
}
\examples{
\dontrun{
library(caschooldata)
library(dplyr)

# After manually downloading CAASPP files:
local_files <- import_local_assess(
  test_data_path = "~/Downloads/sb_ca_2023_allstudents_csv.txt",
  entities_path = "~/Downloads/entities_2023.txt",
  end_year = 2023
)

# Fetch processed assessment data
assess_2023 <- fetch_assess(
  end_year = 2023,
  local_data = local_files,
  tidy = TRUE
)

# State-level 11th grade proficiency
state_11_prof <- assess_2023 \%>\%
  filter(agg_level == "T",
         grade == "11",
         metric_type == "pct_met_and_above")

# District-level comparison
district_ela <- assess_2023 \%>\%
  filter(agg_level == "D",
         grade == "11",
         subject == "ELA",
         metric_type == "pct_met_and_above") \%>\%
  arrange(desc(metric_value))
}
}
